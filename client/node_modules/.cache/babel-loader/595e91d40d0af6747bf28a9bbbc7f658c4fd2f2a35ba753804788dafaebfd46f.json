{"ast":null,"code":"import ProductsService from \"@/services/ProductsService.js\";\nexport const ProductsModule = {\n  namespaced: true,\n  strict: true,\n  state: {\n    productsRouteValidate: true,\n    allProducts: null,\n    allBackupProducts: null,\n    displayProducts: null,\n    apCount: null,\n    perPage: null,\n    searchParameter: {\n      text: \"\",\n      categoryId: 0,\n      subCategoryId: 0,\n      subSubCategoryId: 0,\n      lowestAmount: 0,\n      maximumAmount: 1000000000\n    }\n  },\n  mutations: {\n    SET_ALL_BACKUP_PRODUCTS(state, allProducts) {\n      state.allBackupProducts = allProducts;\n    },\n    SET_ALL_PRODUCTS(state, allProducts) {\n      state.allProducts = allProducts;\n      state.perPage = 9;\n    },\n    SET_DISPLAY_PRODUCTS(state, displayProducts) {\n      state.displayProducts = displayProducts;\n    },\n    SET_AP_COUNT(state, apCount) {\n      state.apCount = apCount;\n    },\n    SET_SEARCH_TEXT(state, searchText) {\n      state.searchParameter.text = searchText;\n    },\n    SET_LOWEST_AMOUNT(state, lowestAmount) {\n      state.searchParameter.lowestAmount = lowestAmount;\n    },\n    SET_MAXIMUM_AMOUNT(state, maximumAmount) {\n      state.searchParameter.maximumAmount = maximumAmount;\n    },\n    SET_ROUTE_STATUS(state, productsRouteValidate) {\n      state.productsRouteValidate = productsRouteValidate;\n    }\n  },\n  actions: {\n    async setSearchParameter({\n      commit\n    }, route) {\n      if (route.query.q) {\n        commit(\"SET_SEARCH_TEXT\", route.query.q);\n      } else commit(\"SET_SEARCH_TEXT\", \"\");\n      if (route.query.lo) {\n        const lo = parseInt(route.query.lo);\n        commit(\"SET_LOWEST_AMOUNT\", lo);\n      } else commit(\"SET_LOWEST_AMOUNT\", 0);\n      if (route.query.hi) {\n        const hi = parseInt(route.query.hi);\n        commit(\"SET_MAXIMUM_AMOUNT\", hi);\n      } else commit(\"SET_MAXIMUM_AMOUNT\", 1000000000);\n    },\n    async setAllBackupProducts({\n      commit\n    }) {\n      const allProducts = (await ProductsService.getAllProducts()).data;\n      commit(\"SET_ALL_BACKUP_PRODUCTS\", allProducts);\n    },\n    async getAllBackupProducts({\n      dispatch,\n      state\n    }) {\n      if (state.allBackupProducts == null || state.allBackupProducts.length == 0) {\n        await dispatch(\"setAllBackupProducts\");\n      }\n      return state.allBackupProducts;\n    },\n    async setAllProducts({\n      commit,\n      state,\n      dispatch\n    }) {\n      const allProducts = await dispatch(\"filterProducts\");\n      commit(\"SET_ALL_PRODUCTS\", allProducts);\n      commit(\"SET_AP_COUNT\", allProducts.length);\n      const displayProducts = allProducts.slice(0, state.perPage);\n      commit(\"SET_DISPLAY_PRODUCTS\", displayProducts);\n    },\n    paginate({\n      commit,\n      state\n    }, currentPage) {\n      const start = (currentPage - 1) * state.perPage;\n      const displayProducts = state.allProducts.slice(start, start + state.perPage);\n      commit(\"SET_DISPLAY_PRODUCTS\", displayProducts);\n    },\n    async filterProducts({\n      state,\n      dispatch\n    }) {\n      var allProducts = await dispatch(\"getAllBackupProducts\");\n      if (state.searchParameter.subSubCategoryId != 0) {\n        allProducts = allProducts.filter(val => {\n          return val.SubSubCategoryId == state.searchParameter.subSubCategoryId;\n        });\n      } else if (state.searchParameter.subCategoryId != 0) {\n        allProducts = allProducts.filter(val => {\n          return val.SubCategoryId == state.searchParameter.subCategoryId;\n        });\n      } else if (state.searchParameter.categoryId != 0) {\n        allProducts = allProducts.filter(val => {\n          return val.CategoryId == state.searchParameter.categoryId;\n        });\n      }\n      allProducts = allProducts.filter(val => {\n        return val.title.toLowerCase().includes(state.searchParameter.text.toLowerCase());\n      });\n      allProducts = allProducts.filter(val => {\n        return val.amount >= state.searchParameter.lowestAmount && val.amount <= state.searchParameter.maximumAmount;\n      });\n      return allProducts;\n    }\n  }\n};","map":{"version":3,"names":["ProductsService","ProductsModule","namespaced","strict","state","productsRouteValidate","allProducts","allBackupProducts","displayProducts","apCount","perPage","searchParameter","text","categoryId","subCategoryId","subSubCategoryId","lowestAmount","maximumAmount","mutations","SET_ALL_BACKUP_PRODUCTS","SET_ALL_PRODUCTS","SET_DISPLAY_PRODUCTS","SET_AP_COUNT","SET_SEARCH_TEXT","searchText","SET_LOWEST_AMOUNT","SET_MAXIMUM_AMOUNT","SET_ROUTE_STATUS","actions","setSearchParameter","commit","route","query","q","lo","parseInt","hi","setAllBackupProducts","getAllProducts","data","getAllBackupProducts","dispatch","length","setAllProducts","slice","paginate","currentPage","start","filterProducts","filter","val","SubSubCategoryId","SubCategoryId","CategoryId","title","toLowerCase","includes","amount"],"sources":["/home/perrine/Downloads/phone-shop/phone-shop/client/src/store/Products.js"],"sourcesContent":["import ProductsService from \"@/services/ProductsService.js\";\n\nexport const ProductsModule = {\n  namespaced: true,\n  strict: true,\n  state: {\n    productsRouteValidate: true,\n    allProducts: null,\n    allBackupProducts: null,\n    displayProducts: null,\n    apCount: null,\n    perPage: null,\n    searchParameter: {\n      text: \"\",\n      categoryId: 0,\n      subCategoryId: 0,\n      subSubCategoryId: 0,\n      lowestAmount: 0,\n      maximumAmount: 1000000000,\n    },\n  },\n  mutations: {\n    SET_ALL_BACKUP_PRODUCTS(state, allProducts) {\n      state.allBackupProducts = allProducts;\n    },\n    SET_ALL_PRODUCTS(state, allProducts) {\n      state.allProducts = allProducts;\n      state.perPage = 9;\n    },\n    SET_DISPLAY_PRODUCTS(state, displayProducts) {\n      state.displayProducts = displayProducts;\n    },\n    SET_AP_COUNT(state, apCount) {\n      state.apCount = apCount;\n    },\n    SET_SEARCH_TEXT(state, searchText) {\n      state.searchParameter.text = searchText;\n    },\n    SET_LOWEST_AMOUNT(state, lowestAmount) {\n      state.searchParameter.lowestAmount = lowestAmount;\n    },\n    SET_MAXIMUM_AMOUNT(state, maximumAmount) {\n      state.searchParameter.maximumAmount = maximumAmount;\n    },\n    SET_ROUTE_STATUS(state, productsRouteValidate) {\n      state.productsRouteValidate = productsRouteValidate;\n    },\n  },\n  actions: {\n    async setSearchParameter({ commit }, route) {\n      if (route.query.q) {\n        commit(\"SET_SEARCH_TEXT\", route.query.q);\n      } else commit(\"SET_SEARCH_TEXT\", \"\");\n      if (route.query.lo) {\n        const lo = parseInt(route.query.lo);\n        commit(\"SET_LOWEST_AMOUNT\", lo);\n      } else commit(\"SET_LOWEST_AMOUNT\", 0);\n      if (route.query.hi) {\n        const hi = parseInt(route.query.hi);\n        commit(\"SET_MAXIMUM_AMOUNT\", hi);\n      } else commit(\"SET_MAXIMUM_AMOUNT\", 1000000000);\n    },\n    async setAllBackupProducts({ commit }) {\n      const allProducts = (await ProductsService.getAllProducts()).data;\n      commit(\"SET_ALL_BACKUP_PRODUCTS\", allProducts);\n    },\n    async getAllBackupProducts({ dispatch, state }) {\n      if (\n        state.allBackupProducts == null ||\n        state.allBackupProducts.length == 0\n      ) {\n        await dispatch(\"setAllBackupProducts\");\n      }\n      return state.allBackupProducts;\n    },\n    async setAllProducts({ commit, state, dispatch }) {\n      const allProducts = await dispatch(\"filterProducts\");\n      commit(\"SET_ALL_PRODUCTS\", allProducts);\n      commit(\"SET_AP_COUNT\", allProducts.length);\n      const displayProducts = allProducts.slice(0, state.perPage);\n      commit(\"SET_DISPLAY_PRODUCTS\", displayProducts);\n    },\n    paginate({ commit, state }, currentPage) {\n      const start = (currentPage - 1) * state.perPage;\n      const displayProducts = state.allProducts.slice(\n        start,\n        start + state.perPage\n      );\n      commit(\"SET_DISPLAY_PRODUCTS\", displayProducts);\n    },\n    async filterProducts({ state, dispatch }) {\n      var allProducts = await dispatch(\"getAllBackupProducts\");\n      if (state.searchParameter.subSubCategoryId != 0) {\n        allProducts = allProducts.filter((val) => {\n          return val.SubSubCategoryId == state.searchParameter.subSubCategoryId;\n        });\n      } else if (state.searchParameter.subCategoryId != 0) {\n        allProducts = allProducts.filter((val) => {\n          return val.SubCategoryId == state.searchParameter.subCategoryId;\n        });\n      } else if (state.searchParameter.categoryId != 0) {\n        allProducts = allProducts.filter((val) => {\n          return val.CategoryId == state.searchParameter.categoryId;\n        });\n      }\n      allProducts = allProducts.filter((val) => {\n        return val.title\n          .toLowerCase()\n          .includes(state.searchParameter.text.toLowerCase());\n      });\n      allProducts = allProducts.filter((val) => {\n        return (\n          val.amount >= state.searchParameter.lowestAmount &&\n          val.amount <= state.searchParameter.maximumAmount\n        );\n      });\n      return allProducts;\n    },\n  },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}